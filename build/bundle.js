var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a,u;function c(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}function s(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function l(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function h(){return g(" ")}function y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function w(t){u=t}function I(t){(function(){if(!u)throw new Error("Function called outside component initialization");return u})().$$.on_mount.push(t)}const A=[],x=[],C=[],k=[],E=Promise.resolve();let O=!1;function U(t){C.push(t)}const j=new Set;let S=0;function _(){const t=u;do{for(;S<A.length;){const t=A[S];S++,w(t),M(t.$$)}for(w(null),A.length=0,S=0;x.length;)x.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];j.has(e)||(j.add(e),e())}C.length=0}while(A.length);for(;k.length;)k.pop()();O=!1,j.clear(),w(t)}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const L=new Set;let N;function B(){N={r:0,c:[],p:N}}function P(){N.r||r(N.c),N=N.p}function T(t,e){t&&t.i&&(L.delete(t),t.i(e))}function D(t,e,n,r){if(t&&t.o){if(L.has(t))return;L.add(t),N.c.push((()=>{L.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function R(t){t&&t.c()}function V(t,n,i,a){const{fragment:u,on_mount:c,on_destroy:s,after_update:l}=t.$$;u&&u.m(n,i),a||U((()=>{const n=c.map(e).filter(o);s?s.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(U)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(A.push(t),O||(O=!0,E.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,i,a,c,s,l,f=[-1]){const m=u;w(e);const p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(m?m.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||m.$$.root};l&&l(p.root);let g=!1;if(p.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),g&&z(e,t)),n})):[],p.update(),g=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();o.intro&&T(e.$$.fragment),V(e,o.target,o.anchor,o.customElement),_()}w(m)}class F{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K={},G={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.UnionCase=void 0,function(t){t.mkUnionCase=function(t,e){return{case:t,fields:e}},t.mkEmptyUnionCase=function(t){return{case:t,fields:void 0}}}(e=t.UnionCase||(t.UnionCase={})),t.default=e}(G);var H={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.Result=void 0,function(t){t.mkOk=function(t){return["Ok",t]},t.mkError=function(t){return["Error",t]},t.reduce=function(t,e,n){switch(t[0]){case"Ok":return e(t[1]);case"Error":return n(t[1])}}}(e=t.Result||(t.Result={})),t.default=e}(H);var Q={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.Pair=void 0,function(t){t.mk=function(t,e){return[t,e]},t.reduce=function(t,e){return e(t[0],t[1])},t.fst=function(t){return t[0]},t.snd=function(t){return t[1]}}(e=t.Pair||(t.Pair={})),t.default=e}(Q);var X={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.Option=void 0,function(t){t.mkSome=function(t){return t},t.mkNone=function(){},t.reduce=function(t,e,n){return void 0===t?n():e(t)},t.isSome=function(t){return void 0!==t}}(e=t.Option||(t.Option={})),t.default=e}(X);var Z,tt,et={};Z=et,Object.defineProperty(Z,"__esModule",{value:!0}),Z.Choice=void 0,function(t){t.mkChoice1Of2=function(t){return["Choice1Of2",t]},t.mkChoice2Of2=function(t){return["Choice2Of2",t]},t.reduce=function(t,e,n){switch(t[0]){case"Choice1Of2":return e(t[1]);case"Choice2Of2":return n(t[1])}}}(tt=Z.Choice||(Z.Choice={})),Z.default=tt;var nt={};!function(t){var e,n=J&&J.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayExt=void 0,function(t){t.takeWhile=function(t,e,n,r){for(var o=n?n+1:t.length,i=new Array(o-e),a=e;a<o;a++){var u=r(t[a],a);if(!u){i.length=a-e;break}i[a-e]=u}if(i.length>0)return[a,i]},t.fold=function(t,e,n){for(var r=e,o=0;o<t.length;o++){r=n(r,t[o],o)}return r},t.swap=function(t,e,r){if(!(0<=e&&e<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");if(!(0<=r&&r<t.length))throw new Error("The dstIndex was outside the range of elements in the list.");if(e===r)return new(Array.bind.apply(Array,n([void 0],t,!1)));var o=new Array(t.length),i=function(e,n){for(var r=0;r<e;r++)o[r]=t[r];o[e]=t[n];for(r=e+1;r<n;r++)o[r]=t[r];o[n]=t[e];for(r=n+1;r<t.length;r++)o[r]=t[r]};return e<r?i(e,r):i(r,e),o},t.pickAndMove=function(t,e,r){if(!(0<=e&&e<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");if(!(0<=r&&r<t.length))throw new Error("The dstIndex was outside the range of elements in the list.");if(e===r)return new(Array.bind.apply(Array,n([void 0],t,!1)));var o=new Array(t.length);if(e<r){for(var i=0;i<e;i++)o[i]=t[i];for(i=e+1;i<=r;i++)o[i-1]=t[i];o[r]=t[e];for(i=r+1;i<t.length;i++)o[i]=t[i]}else{for(i=0;i<r;i++)o[i]=t[i];o[r]=t[e];for(i=r;i<e;i++)o[i+1]=t[i];for(i=e+1;i<t.length;i++)o[i]=t[i]}return o},t.insertBefore=function(t,e,n){if(!(0<=n&&n<=t.length))throw new Error("The srcIndex was outside the range of elements in the list.");for(var r=new Array(t.length+1),o=0;o<n;o++)r[o]=t[o];for(r[n]=e,o=n;o<t.length;o++)r[o+1]=t[o];return r},t.insertAfter=function(t,e,n){if(!(-1<=n&&n<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");for(var r=new Array(t.length+1),o=0;o<=n;o++)r[o]=t[o];for(r[n+1]=e,o=n+1;o<t.length;o++)r[o+1]=t[o];return r},t.remove=function(t,e){if(!(0<=e&&e<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");for(var n=new Array(t.length-1),r=0;r<e;r++)n[r]=t[r];for(r=e+1;r<t.length;r++)n[r-1]=t[r];return n}}(e=t.ArrayExt||(t.ArrayExt={})),t.default=e}(nt);var rt={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.MapExt=void 0,function(t){t.ofArray=function(t){for(var e=new Map,n=0,r=t;n<r.length;n++){var o=r[n],i=o[0],a=o[1];e.set(i,a)}return e},t.toArray=function(t,e){var n=new Array(t.size),r=0;return t.forEach((function(t,o){n[r]=e(o,t),r++})),n},t.replacer=function(t,e){return e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e},t.reviver=function(t,e){return"object"==typeof e&&null!==e&&"Map"===e.dataType?new Map(e.value):e}}(e=t.MapExt||(t.MapExt={})),t.default=e}(rt);var ot=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(K,"__esModule",{value:!0});var it=K.MapExt=ht=K.ArrayExt=K.Choice=mt=K.Option=ft=K.Pair=st=K.Result=ut=K.UnionCase=void 0,at=ot(G),ut=K.UnionCase=at.default,ct=ot(H),st=K.Result=ct.default,lt=ot(Q),ft=K.Pair=lt.default,dt=ot(X),mt=K.Option=dt.default,pt=ot(et);K.Choice=pt.default;var gt=ot(nt),ht=K.ArrayExt=gt.default,yt=ot(rt);let $t;it=K.MapExt=yt.default;const vt=new Uint8Array(16);function bt(){if(!$t&&($t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $t(vt)}var wt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const It=[];for(let t=0;t<256;++t)It.push((t+256).toString(16).slice(1));function At(t,e=0){return(It[t[e+0]]+It[t[e+1]]+It[t[e+2]]+It[t[e+3]]+"-"+It[t[e+4]]+It[t[e+5]]+"-"+It[t[e+6]]+It[t[e+7]]+"-"+It[t[e+8]]+It[t[e+9]]+"-"+It[t[e+10]]+It[t[e+11]]+It[t[e+12]]+It[t[e+13]]+It[t[e+14]]+It[t[e+15]]).toLowerCase()}function xt(t){if(!function(t){return"string"==typeof t&&wt.test(t)}(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function Ct(t,e,n){function r(t,r,o,i){var a;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=xt(r)),16!==(null===(a=r)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+t.length);if(u.set(r),u.set(t,r.length),u=n(u),u[6]=15&u[6]|e,u[8]=63&u[8]|128,o){i=i||0;for(let t=0;t<16;++t)o[i+t]=u[t];return o}return At(u)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function kt(t){return 14+(t+64>>>9<<4)+1}function Et(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function Ot(t,e,n,r,o,i){return Et((a=Et(Et(e,t),Et(r,i)))<<(u=o)|a>>>32-u,n);var a,u}function Ut(t,e,n,r,o,i,a){return Ot(e&n|~e&r,t,e,o,i,a)}function jt(t,e,n,r,o,i,a){return Ot(e&r|n&~r,t,e,o,i,a)}function St(t,e,n,r,o,i,a){return Ot(e^n^r,t,e,o,i,a)}function _t(t,e,n,r,o,i,a){return Ot(n^(e|~r),t,e,o,i,a)}Ct("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){const n=t[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);e.push(i)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[kt(e)-1]=e;let n=1732584193,r=-271733879,o=-1732584194,i=271733878;for(let e=0;e<t.length;e+=16){const a=n,u=r,c=o,s=i;n=Ut(n,r,o,i,t[e],7,-680876936),i=Ut(i,n,r,o,t[e+1],12,-389564586),o=Ut(o,i,n,r,t[e+2],17,606105819),r=Ut(r,o,i,n,t[e+3],22,-1044525330),n=Ut(n,r,o,i,t[e+4],7,-176418897),i=Ut(i,n,r,o,t[e+5],12,1200080426),o=Ut(o,i,n,r,t[e+6],17,-1473231341),r=Ut(r,o,i,n,t[e+7],22,-45705983),n=Ut(n,r,o,i,t[e+8],7,1770035416),i=Ut(i,n,r,o,t[e+9],12,-1958414417),o=Ut(o,i,n,r,t[e+10],17,-42063),r=Ut(r,o,i,n,t[e+11],22,-1990404162),n=Ut(n,r,o,i,t[e+12],7,1804603682),i=Ut(i,n,r,o,t[e+13],12,-40341101),o=Ut(o,i,n,r,t[e+14],17,-1502002290),r=Ut(r,o,i,n,t[e+15],22,1236535329),n=jt(n,r,o,i,t[e+1],5,-165796510),i=jt(i,n,r,o,t[e+6],9,-1069501632),o=jt(o,i,n,r,t[e+11],14,643717713),r=jt(r,o,i,n,t[e],20,-373897302),n=jt(n,r,o,i,t[e+5],5,-701558691),i=jt(i,n,r,o,t[e+10],9,38016083),o=jt(o,i,n,r,t[e+15],14,-660478335),r=jt(r,o,i,n,t[e+4],20,-405537848),n=jt(n,r,o,i,t[e+9],5,568446438),i=jt(i,n,r,o,t[e+14],9,-1019803690),o=jt(o,i,n,r,t[e+3],14,-187363961),r=jt(r,o,i,n,t[e+8],20,1163531501),n=jt(n,r,o,i,t[e+13],5,-1444681467),i=jt(i,n,r,o,t[e+2],9,-51403784),o=jt(o,i,n,r,t[e+7],14,1735328473),r=jt(r,o,i,n,t[e+12],20,-1926607734),n=St(n,r,o,i,t[e+5],4,-378558),i=St(i,n,r,o,t[e+8],11,-2022574463),o=St(o,i,n,r,t[e+11],16,1839030562),r=St(r,o,i,n,t[e+14],23,-35309556),n=St(n,r,o,i,t[e+1],4,-1530992060),i=St(i,n,r,o,t[e+4],11,1272893353),o=St(o,i,n,r,t[e+7],16,-155497632),r=St(r,o,i,n,t[e+10],23,-1094730640),n=St(n,r,o,i,t[e+13],4,681279174),i=St(i,n,r,o,t[e],11,-358537222),o=St(o,i,n,r,t[e+3],16,-722521979),r=St(r,o,i,n,t[e+6],23,76029189),n=St(n,r,o,i,t[e+9],4,-640364487),i=St(i,n,r,o,t[e+12],11,-421815835),o=St(o,i,n,r,t[e+15],16,530742520),r=St(r,o,i,n,t[e+2],23,-995338651),n=_t(n,r,o,i,t[e],6,-198630844),i=_t(i,n,r,o,t[e+7],10,1126891415),o=_t(o,i,n,r,t[e+14],15,-1416354905),r=_t(r,o,i,n,t[e+5],21,-57434055),n=_t(n,r,o,i,t[e+12],6,1700485571),i=_t(i,n,r,o,t[e+3],10,-1894986606),o=_t(o,i,n,r,t[e+10],15,-1051523),r=_t(r,o,i,n,t[e+1],21,-2054922799),n=_t(n,r,o,i,t[e+8],6,1873313359),i=_t(i,n,r,o,t[e+15],10,-30611744),o=_t(o,i,n,r,t[e+6],15,-1560198380),r=_t(r,o,i,n,t[e+13],21,1309151649),n=_t(n,r,o,i,t[e+4],6,-145523070),i=_t(i,n,r,o,t[e+11],10,-1120210379),o=_t(o,i,n,r,t[e+2],15,718787259),r=_t(r,o,i,n,t[e+9],21,-343485551),n=Et(n,a),r=Et(r,u),o=Et(o,c),i=Et(i,s)}return[n,r,o,i]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(kt(e));for(let r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}));var Mt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Lt(t,e,n){if(Mt.randomUUID&&!e&&!t)return Mt.randomUUID();const r=(t=t||{}).random||(t.rng||bt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return At(r)}function Nt(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function Bt(t,e){return t<<e|t>>>32-e}Ct("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const r=t.length/4+2,o=Math.ceil(r/16),i=new Array(o);for(let e=0;e<o;++e){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=t[64*e+4*r]<<24|t[64*e+4*r+1]<<16|t[64*e+4*r+2]<<8|t[64*e+4*r+3];i[e]=n}i[o-1][14]=8*(t.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<o;++t){const r=new Uint32Array(80);for(let e=0;e<16;++e)r[e]=i[t][e];for(let t=16;t<80;++t)r[t]=Bt(r[t-3]^r[t-8]^r[t-14]^r[t-16],1);let o=n[0],a=n[1],u=n[2],c=n[3],s=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),i=Bt(o,5)+Nt(n,a,u,c)+s+e[n]+r[t]>>>0;s=c,c=u,u=Bt(a,30)>>>0,a=o,o=i}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+s>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));var Pt={exports:{}};!function(t,e){function n(t){return"object"!=typeof t||"toString"in t?t:Object.prototype.toString.call(t).slice(8,-1)}Object.defineProperty(e,"__esModule",{value:!0});var r="object"==typeof process&&!0;function o(t,e){if(!t){if(r)throw new Error("Invariant failed");throw new Error(e())}}e.invariant=o;var i=Object.prototype.hasOwnProperty,a=Array.prototype.splice,u=Object.prototype.toString;function c(t){return u.call(t).slice(8,-1)}var s=Object.assign||function(t,e){return l(e).forEach((function(n){i.call(e,n)&&(t[n]=e[n])})),t},l="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function f(t){return Array.isArray(t)?s(t.constructor(t.length),t):"Map"===c(t)?new Map(t):"Set"===c(t)?new Set(t):t&&"object"==typeof t?s(Object.create(Object.getPrototypeOf(t)),t):t}var d=function(){function t(){this.commands=s({},m),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,e){return t===e},this.update.newContext=function(){return(new t).update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),t.prototype.extend=function(t,e){this.commands[t]=e},t.prototype.update=function(t,e){var n=this,r="function"==typeof e?{$apply:e}:e;Array.isArray(t)&&Array.isArray(r)||o(!Array.isArray(r),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),o("object"==typeof r&&null!==r,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."}));var a=t;return l(r).forEach((function(e){if(i.call(n.commands,e)){var o=t===a;a=n.commands[e](r[e],a,r,t),o&&n.isEquals(a,t)&&(a=t)}else{var u="Map"===c(t)?n.update(t.get(e),r[e]):n.update(t[e],r[e]),s="Map"===c(a)?a.get(e):a[e];n.isEquals(u,s)&&(void 0!==u||i.call(t,e))||(a===t&&(a=f(t)),"Map"===c(a)?a.set(e,u):a[e]=u)}})),a},t}();e.Context=d;var m={$push:function(t,e,n){return g(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return g(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,i){return function(t,e){o(Array.isArray(t),(function(){return"Expected $splice target to be an array; got "+n(t)})),y(e.$splice)}(e,r),t.forEach((function(t){y(t),e===i&&t.length&&(e=f(i)),a.apply(e,t)})),e},$set:function(t,e,n){return function(t){o(1===Object.keys(t).length,(function(){return"Cannot have more than one key in an object with $set"}))}(n),t},$toggle:function(t,e){h(t,"$toggle");var n=t.length?f(e):e;return t.forEach((function(t){n[t]=!e[t]})),n},$unset:function(t,e,n,r){return h(t,"$unset"),t.forEach((function(t){Object.hasOwnProperty.call(e,t)&&(e===r&&(e=f(r)),delete e[t])})),e},$add:function(t,e,n,r){return $(e,"$add"),h(t,"$add"),"Map"===c(e)?t.forEach((function(t){var n=t[0],o=t[1];e===r&&e.get(n)!==o&&(e=f(r)),e.set(n,o)})):t.forEach((function(t){e!==r||e.has(t)||(e=f(r)),e.add(t)})),e},$remove:function(t,e,n,r){return $(e,"$remove"),h(t,"$remove"),t.forEach((function(t){e===r&&e.has(t)&&(e=f(r)),e.delete(t)})),e},$merge:function(t,e,r,i){var a,u;return a=e,o((u=t)&&"object"==typeof u,(function(){return"update(): $merge expects a spec of type 'object'; got "+n(u)})),o(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+n(a)})),l(t).forEach((function(n){t[n]!==e[n]&&(e===i&&(e=f(i)),e[n]=t[n])})),e},$apply:function(t,e){var r;return o("function"==typeof(r=t),(function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."})),t(e)}},p=new d;function g(t,e,r){o(Array.isArray(t),(function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(t)+"."})),h(e[r],r)}function h(t,e){o(Array.isArray(t),(function(){return"update(): expected spec of "+n(e)+" to be an array; got "+n(t)+". Did you forget to wrap your parameter in an array?"}))}function y(t){o(Array.isArray(t),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(t)+". Did you forget to wrap your parameters in an array?"}))}function $(t,e){var r=c(t);o("Map"===r||"Set"===r,(function(){return"update(): "+n(e)+" expects a target of type Set or Map; got "+n(r)}))}e.isEquals=p.update.isEquals,e.extend=p.extend,e.default=p.update,e.default.default=t.exports=s(e.default,e)}(Pt,Pt.exports);var Tt,Dt,Rt,Vt,qt=Y(Pt.exports);function zt(t){let e,n,r,o,i,a,u;const c=t[5].default,m=function(t,e,n,r){if(t){const o=s(t,e,n,r);return t[0](o)}}(c,t,t[4],null);return{c(){e=p("div"),n=p("label"),m&&m.c(),r=h(),o=p("input"),$(n,"class","button svelte-hcszan"),$(n,"for","upload"),$(o,"id","upload"),$(o,"type","file"),$(o,"accept",t[0]),$(o,"class","svelte-hcszan"),$(e,"class","button-wrap svelte-hcszan")},m(c,s){f(c,e,s),l(e,n),m&&m.m(n,null),l(e,r),l(e,o),i=!0,a||(u=y(o,"change",t[1]),a=!0)},p(t,[e]){m&&m.p&&(!i||16&e)&&function(t,e,n,r,o,i){if(o){const a=s(e,n,r,i);t.p(a,o)}}(m,c,t,t[4],i?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(c,t[4],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[4]),null),(!i||1&e)&&$(o,"accept",t[0])},i(t){i||(T(m,t),i=!0)},o(t){D(m,t),i=!1},d(t){t&&d(e),m&&m.d(t),a=!1,u()}}}function Wt(t,e,n){let{$$slots:r={},$$scope:o}=e,{accept:i}=e,{startLoading:a}=e,{cb:u}=e;return t.$$set=t=>{"accept"in t&&n(0,i=t.accept),"startLoading"in t&&n(2,a=t.startLoading),"cb"in t&&n(3,u=t.cb),"$$scope"in t&&n(4,o=t.$$scope)},[i,function(t){a();const e=t.currentTarget.files;if(e){const t=e[0],n=new FileReader;n.onload=function(t){const e=t.target;if(e){const t=e.result;t&&u(t)}},n.readAsText(t)}},a,u,o,r]}!function(t){t[t.V0=0]="V0",t[t.V1=1]="V1"}(Tt||(Tt={})),function(t){t.createEmpty=function(){return[]}}(Dt||(Dt={})),function(t){t.create=function(t){return{Version:Tt.V1,Id:t,Name:"",AsBait:mt.mkNone(),AsChest:mt.mkNone(),Description:"",ImageUrl:mt.mkNone()}}}(Rt||(Rt={})),function(t){function e(t,e){return qt(t,{$add:[[e.Id,e]]})}t.create=function(t){const n=Lt(),r=e(t,Rt.create(n));return ft.mk(n,r)},t.load=function(t){const e=JSON.parse(t,it.reviver),n=it.toArray(e,((t,e)=>{const n=e.Version;switch(n){case Tt.V0:const r=e;return[t,{Version:Tt.V1,Id:r.ItemId,Name:r.Name,AsBait:mt.mkSome(r.Loot),AsChest:mt.mkNone(),Description:r.Description,ImageUrl:r.ImageUrl}];case Tt.V1:return[t,e];default:throw new Error(`${n} not implemented yet!`)}}));return new Map(n)},t.save=function(t){return JSON.stringify(t,it.replacer)},t.get=function(t,e){return t.get(e)},t.set=e,t.remove=function(t,e){return qt(t,{$remove:[e]})},function(e){const n="localSaveKey";e.save=function(e){window.localStorage.setItem(n,t.save(e))},e.load=function(){const e=window.localStorage.getItem(n);if(e)return t.load(e)}}(t.LocalStorage||(t.LocalStorage={}))}(Vt||(Vt={}));var Ft=class extends F{constructor(t){super(),W(this,t,Wt,zt,i,{accept:0,startLoading:2,cb:3})}};function Jt(t){let e,n,r;return{c(){e=p("input"),$(e,"id",t[0]),$(e,"type","text"),e.value=t[5]},m(o,i){f(o,e,i),n||(r=y(e,"input",t[7]),n=!0)},p(t,n){1&n&&$(e,"id",t[0]),32&n&&e.value!==t[5]&&(e.value=t[5])},d(t){t&&d(e),n=!1,r()}}}function Yt(t){let e,n,r;return{c(){e=p("textarea"),$(e,"id",t[0]),$(e,"name","text"),$(e,"cols",30),$(e,"rows",10),e.value=t[5]},m(o,i){f(o,e,i),n||(r=y(e,"input",t[6]),n=!0)},p(t,n){1&n&&$(e,"id",t[0]),32&n&&(e.value=t[5])},d(t){t&&d(e),n=!1,r()}}}function Kt(e){let n,r,o,i,a,u,c,s,m,b;function w(t,e){return t[4]?Yt:Jt}let I=w(e),A=I(e);return{c(){n=p("div"),r=p("label"),o=g(e[1]),i=h(),A.c(),a=h(),u=p("button"),c=g("Submit"),$(r,"for",e[0]),u.disabled=s=e[2]===e[5]},m(t,s){f(t,n,s),l(n,r),l(r,o),l(n,i),A.m(n,null),l(n,a),l(n,u),l(u,c),m||(b=y(u,"click",e[8]),m=!0)},p(t,[e]){2&e&&v(o,t[1]),1&e&&$(r,"for",t[0]),I===(I=w(t))&&A?A.p(t,e):(A.d(1),A=I(t),A&&(A.c(),A.m(n,a))),36&e&&s!==(s=t[2]===t[5])&&(u.disabled=s)},i:t,o:t,d(t){t&&d(n),A.d(),m=!1,b()}}}function Gt(t,e,n){let{id:r}=e,{label:o}=e,{value:i}=e,{submit:a}=e,{isMultiline:u=!1}=e,c=i;return t.$$set=t=>{"id"in t&&n(0,r=t.id),"label"in t&&n(1,o=t.label),"value"in t&&n(2,i=t.value),"submit"in t&&n(3,a=t.submit),"isMultiline"in t&&n(4,u=t.isMultiline)},[r,o,i,a,u,c,t=>{n(5,c=t.currentTarget.value)},t=>{n(5,c=t.currentTarget.value)},t=>{i!==c&&a(c)}]}var Ht=class extends F{constructor(t){super(),W(this,t,Gt,Kt,i,{id:0,label:1,value:2,submit:3,isMultiline:4})}};function Qt(t,e,n){const r=t.slice();return r[6]=e[n],r[8]=n,r}function Xt(t){let e,n,r,o,i,a,u,c=t[6].Name+"";function s(...e){return t[3](t[8],...e)}return{c(){e=p("li"),n=p("button"),r=g(c),i=h(),$(n,"style",o=mt.isSome(t[2])&&t[2]===t[8]?"color: red;":"")},m(t,o){f(t,e,o),l(e,n),l(n,r),l(e,i),a||(u=y(n,"click",s),a=!0)},p(e,i){t=e,1&i&&c!==(c=t[6].Name+"")&&v(r,c),4&i&&o!==(o=mt.isSome(t[2])&&t[2]===t[8]?"color: red;":"")&&$(n,"style",o)},d(t){t&&d(e),a=!1,u()}}}function Zt(e){let n,o,i,a,u,c,s,$,v,b,w=e[0],I=[];for(let t=0;t<w.length;t+=1)I[t]=Xt(Qt(e,w,t));return{c(){n=p("div"),o=p("ul");for(let t=0;t<I.length;t+=1)I[t].c();i=h(),a=p("button"),u=g("Выбрать"),s=h(),$=p("button"),$.textContent="Отменить",a.disabled=c=!mt.isSome(e[2])},m(t,r){f(t,n,r),l(n,o);for(let t=0;t<I.length;t+=1)I[t].m(o,null);l(n,i),l(n,a),l(a,u),l(n,s),l(n,$),v||(b=[y(a,"click",e[4]),y($,"click",e[5])],v=!0)},p(t,[e]){if(5&e){let n;for(w=t[0],n=0;n<w.length;n+=1){const r=Qt(t,w,n);I[n]?I[n].p(r,e):(I[n]=Xt(r),I[n].c(),I[n].m(o,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=w.length}4&e&&c!==(c=!mt.isSome(t[2]))&&(a.disabled=c)},i:t,o:t,d(t){t&&d(n),m(I,t),v=!1,r(b)}}}function te(t,e,n){let r,{items:o}=e,{submit:i}=e;return t.$$set=t=>{"items"in t&&n(0,o=t.items),"submit"in t&&n(1,i=t.submit)},[o,i,r,(t,e)=>{mt.reduce(r,(e=>{n(2,r=e===t?mt.mkNone():mt.mkSome(t))}),(()=>{n(2,r=mt.mkSome(t))}))},t=>{mt.reduce(r,(t=>{i(mt.mkSome(o[t]))}),(()=>{}))},t=>{i(mt.mkNone())}]}class ee extends F{constructor(t){super(),W(this,t,te,Zt,i,{items:0,submit:1})}}function ne(t,e,n){const r=t.slice();return r[11]=e[n],r[13]=n,r}function re(t){let e,n,r,o,i=t[11][1]+"";return{c(){e=p("div"),n=g("Unknown item with "),r=g(i),o=g(" ID")},m(t,i){f(t,e,i),l(e,n),l(e,r),l(e,o)},p(t,e){2&e&&i!==(i=t[11][1]+"")&&v(r,i)},d(t){t&&d(e)}}}function oe(t){let e,n,r=t[11][1].Name+"";return{c(){e=p("div"),n=g(r)},m(t,r){f(t,e,r),l(e,n)},p(t,e){2&e&&r!==(r=t[11][1].Name+"")&&v(n,r)},d(t){t&&d(e)}}}function ie(t){let e,n,r,o,i,a;function u(t,e){return"Ok"===t[11][0]?oe:re}let c=u(t),s=c(t);function m(...e){return t[7](t[13],...e)}return{c(){e=p("il"),s.c(),n=h(),r=p("button"),r.textContent="Удалить",o=h()},m(t,u){f(t,e,u),s.m(e,null),l(e,n),l(e,r),l(e,o),i||(a=y(r,"click",m),i=!0)},p(r,o){c===(c=u(t=r))&&s?s.p(t,o):(s.d(1),s=c(t),s&&(s.c(),s.m(e,n)))},d(t){t&&d(e),s.d(),i=!1,a()}}}function ae(t){let e,n;return e=new ee({props:{items:t[4]().filter(t[9]),submit:t[10]}}),{c(){R(e.$$.fragment)},m(t,r){V(e,t,r),n=!0},p(t,n){const r={};17&n&&(r.items=t[4]().filter(t[9])),42&n&&(r.submit=t[10]),e.$set(r)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ue(t){let e,n,r,o,i,a,u,c,s,g,$,v=t[1],b=[];for(let e=0;e<v.length;e+=1)b[e]=ie(ne(t,v,e));let w=t[5]&&ae(t);return{c(){e=p("div"),n=p("div"),n.textContent="Можно поймать:",r=h(),o=p("div"),i=p("ul");for(let t=0;t<b.length;t+=1)b[t].c();a=h(),u=p("button"),u.textContent="Добавить",c=h(),w&&w.c()},m(d,m){f(d,e,m),l(e,n),l(e,r),l(e,o),l(o,i);for(let t=0;t<b.length;t+=1)b[t].m(i,null);l(e,a),l(e,u),l(e,c),w&&w.m(e,null),s=!0,g||($=y(u,"click",t[8]),g=!0)},p(t,[n]){if(6&n){let e;for(v=t[1],e=0;e<v.length;e+=1){const r=ne(t,v,e);b[e]?b[e].p(r,n):(b[e]=ie(r),b[e].c(),b[e].m(i,null))}for(;e<b.length;e+=1)b[e].d(1);b.length=v.length}t[5]?w?(w.p(t,n),32&n&&T(w,1)):(w=ae(t),w.c(),T(w,1),w.m(e,null)):w&&(B(),D(w,1,1,(()=>{w=null})),P())},i(t){s||(T(w),s=!0)},o(t){D(w),s=!1},d(t){t&&d(e),m(b,t),w&&w.d(),g=!1,$()}}}function ce(t,e,n){let{id:r}=e,{loot:o}=e,{removeByIndex:i}=e,{insertAfter:a}=e,{getAllItems:u}=e,c=!1;function s(t){const e=o.find((e=>st.reduce(e,(e=>t===e),(e=>t.Id===e))));return mt.isSome(e)}return t.$$set=t=>{"id"in t&&n(0,r=t.id),"loot"in t&&n(1,o=t.loot),"removeByIndex"in t&&n(2,i=t.removeByIndex),"insertAfter"in t&&n(3,a=t.insertAfter),"getAllItems"in t&&n(4,u=t.getAllItems)},[r,o,i,a,u,c,s,(t,e)=>{i(t)},t=>{n(5,c=!0)},t=>t.Id!==r&&!s(t),t=>{mt.reduce(t,(t=>{a(o.length-1,t.Id)}),(()=>{})),n(5,c=!1)}]}class se extends F{constructor(t){super(),W(this,t,ce,ue,i,{id:0,loot:1,removeByIndex:2,insertAfter:3,getAllItems:4})}}function le(e){let n,r,o,i,a,u,c;return{c(){n=p("div"),r=p("input"),o=h(),i=p("label"),a=g(e[1]),$(r,"id",e[0]),$(r,"type","checkbox"),r.checked=e[2],$(i,"for",e[0])},m(t,s){f(t,n,s),l(n,r),l(n,o),l(n,i),l(i,a),u||(c=y(r,"change",e[6]),u=!0)},p(t,[e]){1&e&&$(r,"id",t[0]),4&e&&(r.checked=t[2]),2&e&&v(a,t[1]),1&e&&$(i,"for",t[0])},i:t,o:t,d(t){t&&d(n),u=!1,c()}}}function fe(t,e,n){let{id:r}=e,{label:o}=e,{isOn:i}=e,{submit:a}=e,u=i;function c(){n(2,u=!u),a(u)}return t.$$set=t=>{"id"in t&&n(0,r=t.id),"label"in t&&n(1,o=t.label),"isOn"in t&&n(4,i=t.isOn),"submit"in t&&n(5,a=t.submit)},[r,o,u,c,i,a,t=>{c()}]}var de=class extends F{constructor(t){super(),W(this,t,fe,le,i,{id:0,label:1,isOn:4,submit:5})}};function me(t){let e,n;return e=new se({props:{id:t[1],loot:t[5].map(t[8]),removeByIndex:t[9],insertAfter:t[10],getAllItems:t[3]}}),{c(){R(e.$$.fragment)},m(t,r){V(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.id=t[1]),48&n&&(r.loot=t[5].map(t[8])),100&n&&(r.removeByIndex=t[9]),100&n&&(r.insertAfter=t[10]),8&n&&(r.getAllItems=t[3]),e.$set(r)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function pe(t){let e,n,r,o;n=new de({props:{id:`use${t[6]}Checkbox`,label:t[0],isOn:mt.isSome(t[5]),submit:t[7]}});let i=t[5]&&me(t);return{c(){e=p("div"),R(n.$$.fragment),r=h(),i&&i.c()},m(t,a){f(t,e,a),V(n,e,null),l(e,r),i&&i.m(e,null),o=!0},p(t,[r]){const o={};64&r&&(o.id=`use${t[6]}Checkbox`),1&r&&(o.label=t[0]),32&r&&(o.isOn=mt.isSome(t[5])),n.$set(o),t[5]?i?(i.p(t,r),32&r&&T(i,1)):(i=me(t),i.c(),T(i,1),i.m(e,null)):i&&(B(),D(i,1,1,(()=>{i=null})),P())},i(t){o||(T(n.$$.fragment,t),T(i),o=!0)},o(t){D(n.$$.fragment,t),D(i),o=!1},d(t){t&&d(e),q(n),i&&i.d()}}}function ge(t,e,n){let{label:r}=e,{itemId:o}=e,{updateItem:i}=e,{getAllItems:a}=e,{getItemById:u}=e,{asLoot:c}=e,{field:s}=e;return t.$$set=t=>{"label"in t&&n(0,r=t.label),"itemId"in t&&n(1,o=t.itemId),"updateItem"in t&&n(2,i=t.updateItem),"getAllItems"in t&&n(3,a=t.getAllItems),"getItemById"in t&&n(4,u=t.getItemById),"asLoot"in t&&n(5,c=t.asLoot),"field"in t&&n(6,s=t.field)},[r,o,i,a,u,c,s,function(t){i({[s]:{$set:t?mt.mkSome(Dt.createEmpty()):mt.mkNone()}})},t=>u(t),t=>{i({[s]:{$set:mt.mkSome(ht.remove(c,t))}})},(t,e)=>{i({[s]:{$set:mt.mkSome(ht.insertAfter(c,e,t))}})}]}class he extends F{constructor(t){super(),W(this,t,ge,pe,i,{label:0,itemId:1,updateItem:2,getAllItems:3,getItemById:4,asLoot:5,field:6})}}function ye(t){let e,n;return{c(){e=p("img"),c(e.src,n=t[0].ImageUrl)||$(e,"src",n),$(e,"alt","изображение для предмета")},m(t,n){f(t,e,n)},p(t,r){1&r&&!c(e.src,n=t[0].ImageUrl)&&$(e,"src",n)},d(t){t&&d(e)}}}function $e(t){let e,n,r,o,i,a,u,c,s,m,y,$,b,w,I,A,x=t[0].Id+"",C=mt.isSome(t[0].ImageUrl);a=new Ht({props:{id:"nameInput",label:"Название:",value:t[0].Name,submit:t[6]}}),c=new he({props:{label:"Использовать в качестве наживки",itemId:t[0].Id,updateItem:t[3],getAllItems:t[2],getItemById:t[1],asLoot:t[0].AsBait,field:"AsBait"}}),m=new he({props:{label:"Использовать в качестве сундука",itemId:t[0].Id,updateItem:t[3],getAllItems:t[2],getItemById:t[1],asLoot:t[0].AsChest,field:"AsChest"}}),$=new Ht({props:{id:"descriptionInput",label:"Описание:",isMultiline:!0,value:t[0].Description,submit:t[7]}}),w=new Ht({props:{id:"imgUrlInput",label:"Ссылка на изображение:",value:mt.reduce(t[0].ImageUrl,ve,be),submit:t[8]}});let k=C&&ye(t);return{c(){e=p("div"),n=p("div"),r=g("Id: "),o=g(x),i=h(),R(a.$$.fragment),u=h(),R(c.$$.fragment),s=h(),R(m.$$.fragment),y=h(),R($.$$.fragment),b=h(),R(w.$$.fragment),I=h(),k&&k.c()},m(t,d){f(t,e,d),l(e,n),l(n,r),l(n,o),l(e,i),V(a,e,null),l(e,u),V(c,e,null),l(e,s),V(m,e,null),l(e,y),V($,e,null),l(e,b),V(w,e,null),l(e,I),k&&k.m(e,null),A=!0},p(t,[n]){(!A||1&n)&&x!==(x=t[0].Id+"")&&v(o,x);const r={};1&n&&(r.value=t[0].Name),a.$set(r);const i={};1&n&&(i.itemId=t[0].Id),1&n&&(i.asLoot=t[0].AsBait),c.$set(i);const u={};1&n&&(u.itemId=t[0].Id),1&n&&(u.asLoot=t[0].AsChest),m.$set(u);const s={};1&n&&(s.value=t[0].Description),$.$set(s);const l={};1&n&&(l.value=mt.reduce(t[0].ImageUrl,ve,be)),w.$set(l),1&n&&(C=mt.isSome(t[0].ImageUrl)),C?k?k.p(t,n):(k=ye(t),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i(t){A||(T(a.$$.fragment,t),T(c.$$.fragment,t),T(m.$$.fragment,t),T($.$$.fragment,t),T(w.$$.fragment,t),A=!0)},o(t){D(a.$$.fragment,t),D(c.$$.fragment,t),D(m.$$.fragment,t),D($.$$.fragment,t),D(w.$$.fragment,t),A=!1},d(t){t&&d(e),q(a),q(c),q(m),q($),q(w),k&&k.d()}}}const ve=t=>t,be=()=>"";function we(t,e,n){let{item:r}=e,{itemsContainer:o}=e,{updateItemsContainer:i}=e;function a(t){!function(t){i(Vt.set(o,t))}(qt(r,t))}return t.$$set=t=>{"item"in t&&n(0,r=t.item),"itemsContainer"in t&&n(4,o=t.itemsContainer),"updateItemsContainer"in t&&n(5,i=t.updateItemsContainer)},[r,function(t){return mt.reduce(Vt.get(o,t),(t=>st.mkOk(t)),(()=>st.mkError(t)))},function(){return it.toArray(o,((t,e)=>e))},a,o,i,t=>{a({Name:{$set:t}})},t=>{a({Description:{$set:t}})},t=>{a({ImageUrl:{$set:""!==t?mt.mkSome(t):mt.mkNone()}})}]}class Ie extends F{constructor(t){super(),W(this,t,we,$e,i,{item:0,itemsContainer:4,updateItemsContainer:5})}}function Ae(e){let n,r,o=e[0][1]+"";return{c(){n=g("Not found "),r=g(o)},m(t,e){f(t,n,e),f(t,r,e)},p(t,e){1&e&&o!==(o=t[0][1]+"")&&v(r,o)},i:t,o:t,d(t){t&&d(n),t&&d(r)}}}function xe(t){let e,n;return e=new Ie({props:{item:t[0][1],itemsContainer:t[1],updateItemsContainer:t[2]}}),{c(){R(e.$$.fragment)},m(t,r){V(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.item=t[0][1]),2&n&&(r.itemsContainer=t[1]),4&n&&(r.updateItemsContainer=t[2]),e.$set(r)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Ce(t){let e,n,r,o;const i=[xe,Ae],a=[];function u(t,e){return"Ok"===t[0][0]?0:1}return n=u(t),r=a[n]=i[n](t),{c(){e=p("div"),r.c()},m(t,r){f(t,e,r),a[n].m(e,null),o=!0},p(t,[o]){let c=n;n=u(t),n===c?a[n].p(t,o):(B(),D(a[c],1,1,(()=>{a[c]=null})),P(),r=a[n],r?r.p(t,o):(r=a[n]=i[n](t),r.c()),T(r,1),r.m(e,null))},i(t){o||(T(r),o=!0)},o(t){D(r),o=!1},d(t){t&&d(e),a[n].d()}}}function ke(t,e,n){let{item:r}=e,{itemsContainer:o}=e,{updateItemsContainer:i}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item),"itemsContainer"in t&&n(1,o=t.itemsContainer),"updateItemsContainer"in t&&n(2,i=t.updateItemsContainer)},[r,o,i]}class Ee extends F{constructor(t){super(),W(this,t,ke,Ce,i,{item:0,itemsContainer:1,updateItemsContainer:2})}}function Oe(t,e,n){const r=t.slice();return r[12]=e[n],r[14]=n,r}function Ue(t){let e,n,r;function o(t,e){return t[12].AsBait.length>0?Se:je}let i=o(t),a=i(t);return{c(){e=p("div"),n=p("span"),n.textContent="Служит наживкой для:",r=h(),a.c()},m(t,o){f(t,e,o),l(e,n),l(e,r),a.m(e,null)},p(t,n){i===(i=o(t))&&a?a.p(t,n):(a.d(1),a=i(t),a&&(a.c(),a.m(e,null)))},d(t){t&&d(e),a.d()}}}function je(e){let n;return{c(){n=p("span"),n.textContent="ничего"},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function Se(t){let e,n=t[5](t[12].AsBait)+"";return{c(){e=g(n)},m(t,n){f(t,e,n)},p(t,r){16&r&&n!==(n=t[5](t[12].AsBait)+"")&&v(e,n)},d(t){t&&d(e)}}}function _e(t){let e,n,r;function o(t,e){return t[12].AsChest.length>0?Le:Me}let i=o(t),a=i(t);return{c(){e=p("div"),n=p("span"),n.textContent="Является сундуком, в котором может лежать:",r=h(),a.c()},m(t,o){f(t,e,o),l(e,n),l(e,r),a.m(e,null)},p(t,n){i===(i=o(t))&&a?a.p(t,n):(a.d(1),a=i(t),a&&(a.c(),a.m(e,null)))},d(t){t&&d(e),a.d()}}}function Me(e){let n;return{c(){n=p("span"),n.textContent="ничего"},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function Le(t){let e,n=t[5](t[12].AsChest)+"";return{c(){e=g(n)},m(t,n){f(t,e,n)},p(t,r){16&r&&n!==(n=t[5](t[12].AsChest)+"")&&v(e,n)},d(t){t&&d(e)}}}function Ne(t){let e,n,r,o,i;return{c(){e=p("div"),n=p("span"),n.textContent="Картинка:",r=h(),o=p("img"),c(o.src,i=t[12].ImageUrl)||$(o,"src",i),$(o,"alt",""),$(o,"width","40")},m(t,i){f(t,e,i),l(e,n),l(e,r),l(e,o)},p(t,e){16&e&&!c(o.src,i=t[12].ImageUrl)&&$(o,"src",i)},d(t){t&&d(e)}}}function Be(t){let e,n,o,i,a,u,c,s,m,$,b,w,I,A,x,C,k,E=t[12].Name+"",O=t[12].Description+"",U=t[12].AsBait&&Ue(t),j=t[12].AsChest&&_e(t),S=t[12].ImageUrl&&Ne(t);function _(...e){return t[9](t[12],...e)}function M(...e){return t[10](t[12],...e)}return{c(){e=p("div"),n=p("h4"),o=g(E),i=h(),U&&U.c(),a=h(),j&&j.c(),u=h(),c=p("div"),s=g("Описание: "),m=g(O),$=h(),S&&S.c(),b=h(),w=p("button"),w.textContent="Редактировать",I=h(),A=p("button"),A.textContent="Удалить",x=h()},m(t,r){f(t,e,r),l(e,n),l(n,o),l(e,i),U&&U.m(e,null),l(e,a),j&&j.m(e,null),l(e,u),l(e,c),l(c,s),l(c,m),l(e,$),S&&S.m(e,null),l(e,b),l(e,w),l(e,I),l(e,A),l(e,x),C||(k=[y(w,"click",_),y(A,"click",M)],C=!0)},p(n,r){t=n,16&r&&E!==(E=t[12].Name+"")&&v(o,E),t[12].AsBait?U?U.p(t,r):(U=Ue(t),U.c(),U.m(e,a)):U&&(U.d(1),U=null),t[12].AsChest?j?j.p(t,r):(j=_e(t),j.c(),j.m(e,u)):j&&(j.d(1),j=null),16&r&&O!==(O=t[12].Description+"")&&v(m,O),t[12].ImageUrl?S?S.p(t,r):(S=Ne(t),S.c(),S.m(e,b)):S&&(S.d(1),S=null)},d(t){t&&d(e),U&&U.d(),j&&j.d(),S&&S.d(),C=!1,r(k)}}}function Pe(e){let n,o,i,a,u,c,s,g,v,w,I,A=e[4],x=[];for(let t=0;t<A.length;t+=1)x[t]=Be(Oe(e,A,t));return{c(){n=p("div"),o=p("div"),i=p("label"),i.textContent="Фильтр:",a=h(),u=p("input"),c=h(),s=p("div");for(let t=0;t<x.length;t+=1)x[t].c();g=h(),v=p("button"),v.textContent="Добавить",$(i,"for","filter"),$(u,"id","filter"),$(u,"type","text"),u.value=e[3],b(s,"overflow-y","auto"),b(n,"height","100%"),b(n,"display","flex"),b(n,"flex-direction","column")},m(t,r){f(t,n,r),l(n,o),l(o,i),l(o,a),l(o,u),l(n,c),l(n,s);for(let t=0;t<x.length;t+=1)x[t].m(s,null);l(n,g),l(n,v),w||(I=[y(u,"input",e[8]),y(v,"click",e[11])],w=!0)},p(t,[e]){if(8&e&&u.value!==t[3]&&(u.value=t[3]),55&e){let n;for(A=t[4],n=0;n<A.length;n+=1){const r=Oe(t,A,n);x[n]?x[n].p(r,e):(x[n]=Be(r),x[n].c(),x[n].m(s,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=A.length}},i:t,o:t,d(t){t&&d(n),m(x,t),w=!1,r(I)}}}function Te(t,e){return t.Name.toLowerCase().includes(e)}function De(t,e,n){let r,o,{editItem:i}=e,{itemsContainer:a}=e,{updateItemsContainer:u}=e;let c="";function s(t){n(3,c=t.toLowerCase()),n(4,o=r.filter((t=>Te(t,c))))}I((()=>{s(c)}));return t.$$set=t=>{"editItem"in t&&n(0,i=t.editItem),"itemsContainer"in t&&n(1,a=t.itemsContainer),"updateItemsContainer"in t&&n(2,u=t.updateItemsContainer)},t.$$.update=()=>{2&t.$$.dirty&&n(7,r=it.toArray(a,((t,e)=>e))),136&t.$$.dirty&&n(4,o=r.filter((t=>Te(t,c))))},[i,a,u,c,o,function(t){return t.map((t=>mt.reduce(Vt.get(a,t),(t=>t.Name),(()=>`unknown item with ${t} ID`)))).filter(mt.isSome).join(", ")},s,r,t=>{s(t.currentTarget.value)},(t,e)=>{i(t.Id)},(t,e)=>{u(Vt.remove(a,t.Id))},t=>{const[e,n]=Vt.create(a);u(n),i(e)}]}class Re extends F{constructor(t){super(),W(this,t,De,Pe,i,{editItem:0,itemsContainer:1,updateItemsContainer:2})}}function Ve(t){let e;return{c(){e=g("Загрузить")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function qe(t){let e,n,r;return n=new Re({props:{editItem:t[9],itemsContainer:t[1],updateItemsContainer:t[2]}}),{c(){e=p("div"),R(n.$$.fragment),b(e,"flex-grow","1"),b(e,"overflow-y","auto")},m(t,o){f(t,e,o),V(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.editItem=t[9]),2&e&&(r.itemsContainer=t[1]),n.$set(r)},i(t){r||(T(n.$$.fragment,t),r=!0)},o(t){D(n.$$.fragment,t),r=!1},d(t){t&&d(e),q(n)}}}function ze(t){let e,n,r,o,i,a,u;return o=new Ee({props:{item:t[3](t[0].fields),itemsContainer:t[1],updateItemsContainer:t[8]}}),{c(){e=p("div"),n=p("button"),n.textContent="Вернуться к списку предметов",r=h(),R(o.$$.fragment)},m(c,s){f(c,e,s),l(e,n),l(e,r),V(o,e,null),i=!0,a||(u=y(n,"click",t[7]),a=!0)},p(t,e){const n={};1&e&&(n.item=t[3](t[0].fields)),2&e&&(n.itemsContainer=t[1]),1&e&&(n.updateItemsContainer=t[8]),o.$set(n)},i(t){i||(T(o.$$.fragment,t),i=!0)},o(t){D(o.$$.fragment,t),i=!1},d(t){t&&d(e),q(o),a=!1,u()}}}function We(t){let e,n,r,o,i,a,u,c,s,m,g;r=new Ft({props:{accept:"application/json",startLoading:Fe,cb:t[5],$$slots:{default:[Ve]},$$scope:{ctx:t}}});const v=[ze,qe],w=[];function I(t,e){return"Item"===t[0].case?0:"ItemList"===t[0].case?1:-1}return~(u=I(t))&&(c=w[u]=v[u](t)),{c(){e=p("main"),n=p("nav"),R(r.$$.fragment),o=h(),i=p("button"),i.textContent="Сохранить",a=h(),c&&c.c(),b(n,"display","flex"),$(e,"class","svelte-yt8nlh")},m(c,d){f(c,e,d),l(e,n),V(r,n,null),l(n,o),l(n,i),l(e,a),~u&&w[u].m(e,null),s=!0,m||(g=y(i,"click",t[6]),m=!0)},p(t,[n]){const o={};2048&n&&(o.$$scope={dirty:n,ctx:t}),r.$set(o);let i=u;u=I(t),u===i?~u&&w[u].p(t,n):(c&&(B(),D(w[i],1,1,(()=>{w[i]=null})),P()),~u?(c=w[u],c?c.p(t,n):(c=w[u]=v[u](t),c.c()),T(c,1),c.m(e,null)):c=null)},i(t){s||(T(r.$$.fragment,t),T(c),s=!0)},o(t){D(r.$$.fragment,t),D(c),s=!1},d(t){t&&d(e),q(r),~u&&w[u].d(),m=!1,g()}}}const Fe=()=>{};function Je(t,e,n){let r=ut.mkEmptyUnionCase("ItemList"),o=new Map;function i(t){n(1,o=t),Vt.LocalStorage.save(o)}function a(t){n(1,o=t),n(0,r=ut.mkEmptyUnionCase("ItemList")),Vt.LocalStorage.save(o)}const u=Vt.LocalStorage.load();u&&a(u);return[r,o,i,function(t){return mt.reduce(Vt.get(o,t),(t=>st.mkOk(t)),(()=>st.mkError(t)))},a,t=>a(Vt.load(t)),t=>{!function(t,e,n){const r=new Blob([t],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,e);else{const t=document.createElement("a"),n=URL.createObjectURL(r);t.href=n,t.download=e,document.body.appendChild(t),t.click(),setTimeout((function(){document.body.removeChild(t),window.URL.revokeObjectURL(n)}),0)}}(Vt.save(o),"items.json","application/json")},t=>{n(0,r=ut.mkEmptyUnionCase("ItemList"))},t=>{i(t),"Item"===r.case&&n(0,r=ut.mkUnionCase("Item",r.fields))},t=>{n(0,r=ut.mkUnionCase("Item",t))}]}class Ye extends F{constructor(t){super(),W(this,t,Je,We,i,{})}}function Ke(e){let n,r;return n=new Ye({}),{c(){R(n.$$.fragment)},m(t,e){V(n,t,e),r=!0},p:t,i(t){r||(T(n.$$.fragment,t),r=!0)},o(t){D(n.$$.fragment,t),r=!1},d(t){q(n,t)}}}const Ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function He(t){navigator.serviceWorker.register(t).then((t=>{t.onupdatefound=()=>{const e=t.installing;e.onstatechange=()=>{"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available please refresh."):console.log("Content is cached for offline use."))}}})).catch((t=>{console.error("Error during service worker registration:",t)}))}const Qe=new class extends F{constructor(t){super(),W(this,t,null,Ke,i,{})}}({target:document.body,props:{}});return function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="./sw.js";Ge?function(t){fetch(t).then((e=>{const n=e.headers.get("content-type");404===e.status||n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((t=>{t.unregister().then((()=>{window.location.reload()}))})):He(t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t):He(t)}))}}(),Qe}();
