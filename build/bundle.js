var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a,c;function u(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}function s(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function l(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function g(){return h(" ")}function y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function w(t){c=t}const I=[],x=[],C=[],A=[],k=Promise.resolve();let E=!1;function O(t){C.push(t)}const U=new Set;let j=0;function _(){const t=c;do{for(;j<I.length;){const t=I[j];j++,w(t),M(t.$$)}for(w(null),I.length=0,j=0;x.length;)x.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];U.has(e)||(U.add(e),e())}C.length=0}while(I.length);for(;A.length;)A.pop()();E=!1,U.clear(),w(t)}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const S=new Set;let L;function N(){L={r:0,c:[],p:L}}function P(){L.r||r(L.c),L=L.p}function T(t,e){t&&t.i&&(S.delete(t),t.i(e))}function D(t,e,n,r){if(t&&t.o){if(S.has(t))return;S.add(t),L.c.push((()=>{S.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function R(t){t&&t.c()}function B(t,n,i,a){const{fragment:c,on_mount:u,on_destroy:s,after_update:l}=t.$$;c&&c.m(n,i),a||O((()=>{const n=u.map(e).filter(o);s?s.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(O)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(I.push(t),E||(E=!0,k.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(e,o,i,a,u,s,l,f=[-1]){const p=c;w(e);const m=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||p.$$.root};l&&l(m.root);let h=!1;if(m.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return m.ctx&&u(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),h&&V(e,t)),n})):[],m.update(),h=!0,r(m.before_update),m.fragment=!!a&&a(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();o.intro&&T(e.$$.fragment),B(e,o.target,o.anchor,o.customElement),_()}w(p)}class z{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F={},K={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.UnionCase=void 0,function(t){t.mkUnionCase=function(t,e){return{case:t,fields:e}},t.mkEmptyUnionCase=function(t){return{case:t,fields:void 0}}}(e=t.UnionCase||(t.UnionCase={})),t.default=e}(K);var G={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.Result=void 0,function(t){t.mkOk=function(t){return["Ok",t]},t.mkError=function(t){return["Error",t]},t.reduce=function(t,e,n){switch(t[0]){case"Ok":return e(t[1]);case"Error":return n(t[1])}}}(e=t.Result||(t.Result={})),t.default=e}(G);var H={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.Pair=void 0,function(t){t.mk=function(t,e){return[t,e]},t.reduce=function(t,e){return e(t[0],t[1])},t.fst=function(t){return t[0]},t.snd=function(t){return t[1]}}(e=t.Pair||(t.Pair={})),t.default=e}(H);var Q={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.Option=void 0,function(t){t.mkSome=function(t){return t},t.mkNone=function(){},t.reduce=function(t,e,n){return void 0===t?n():e(t)},t.isSome=function(t){return void 0!==t}}(e=t.Option||(t.Option={})),t.default=e}(Q);var X,Z,tt={};X=tt,Object.defineProperty(X,"__esModule",{value:!0}),X.Choice=void 0,function(t){t.mkChoice1Of2=function(t){return["Choice1Of2",t]},t.mkChoice2Of2=function(t){return["Choice2Of2",t]},t.reduce=function(t,e,n){switch(t[0]){case"Choice1Of2":return e(t[1]);case"Choice2Of2":return n(t[1])}}}(Z=X.Choice||(X.Choice={})),X.default=Z;var et={};!function(t){var e,n=J&&J.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayExt=void 0,function(t){t.takeWhile=function(t,e,n,r){for(var o=n?n+1:t.length,i=new Array(o-e),a=e;a<o;a++){var c=r(t[a],a);if(!c){i.length=a-e;break}i[a-e]=c}if(i.length>0)return[a,i]},t.fold=function(t,e,n){for(var r=e,o=0;o<t.length;o++){r=n(r,t[o],o)}return r},t.swap=function(t,e,r){if(!(0<=e&&e<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");if(!(0<=r&&r<t.length))throw new Error("The dstIndex was outside the range of elements in the list.");if(e===r)return new(Array.bind.apply(Array,n([void 0],t,!1)));var o=new Array(t.length),i=function(e,n){for(var r=0;r<e;r++)o[r]=t[r];o[e]=t[n];for(r=e+1;r<n;r++)o[r]=t[r];o[n]=t[e];for(r=n+1;r<t.length;r++)o[r]=t[r]};return e<r?i(e,r):i(r,e),o},t.pickAndMove=function(t,e,r){if(!(0<=e&&e<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");if(!(0<=r&&r<t.length))throw new Error("The dstIndex was outside the range of elements in the list.");if(e===r)return new(Array.bind.apply(Array,n([void 0],t,!1)));var o=new Array(t.length);if(e<r){for(var i=0;i<e;i++)o[i]=t[i];for(i=e+1;i<=r;i++)o[i-1]=t[i];o[r]=t[e];for(i=r+1;i<t.length;i++)o[i]=t[i]}else{for(i=0;i<r;i++)o[i]=t[i];o[r]=t[e];for(i=r;i<e;i++)o[i+1]=t[i];for(i=e+1;i<t.length;i++)o[i]=t[i]}return o},t.insertBefore=function(t,e,n){if(!(0<=n&&n<=t.length))throw new Error("The srcIndex was outside the range of elements in the list.");for(var r=new Array(t.length+1),o=0;o<n;o++)r[o]=t[o];for(r[n]=e,o=n;o<t.length;o++)r[o+1]=t[o];return r},t.insertAfter=function(t,e,n){if(!(-1<=n&&n<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");for(var r=new Array(t.length+1),o=0;o<=n;o++)r[o]=t[o];for(r[n+1]=e,o=n+1;o<t.length;o++)r[o+1]=t[o];return r},t.remove=function(t,e){if(!(0<=e&&e<t.length))throw new Error("The srcIndex was outside the range of elements in the list.");for(var n=new Array(t.length-1),r=0;r<e;r++)n[r]=t[r];for(r=e+1;r<t.length;r++)n[r-1]=t[r];return n}}(e=t.ArrayExt||(t.ArrayExt={})),t.default=e}(et);var nt={};!function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.MapExt=void 0,function(t){t.ofArray=function(t){for(var e=new Map,n=0,r=t;n<r.length;n++){var o=r[n],i=o[0],a=o[1];e.set(i,a)}return e},t.toArray=function(t,e){var n=new Array(t.size),r=0;return t.forEach((function(t,o){n[r]=e(o,t),r++})),n},t.replacer=function(t,e){return e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e},t.reviver=function(t,e){return"object"==typeof e&&null!==e&&"Map"===e.dataType?new Map(e.value):e}}(e=t.MapExt||(t.MapExt={})),t.default=e}(nt);var rt=J&&J.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(F,"__esModule",{value:!0});var ot=F.MapExt=ht=F.ArrayExt=F.Choice=dt=F.Option=lt=F.Pair=ut=F.Result=at=F.UnionCase=void 0,it=rt(K),at=F.UnionCase=it.default,ct=rt(G),ut=F.Result=ct.default,st=rt(H),lt=F.Pair=st.default,ft=rt(Q),dt=F.Option=ft.default,pt=rt(tt);F.Choice=pt.default;var mt=rt(et),ht=F.ArrayExt=mt.default,gt=rt(nt);let yt;ot=F.MapExt=gt.default;const vt=new Uint8Array(16);function $t(){if(!yt&&(yt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yt(vt)}var bt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const wt=[];for(let t=0;t<256;++t)wt.push((t+256).toString(16).slice(1));function It(t,e=0){return(wt[t[e+0]]+wt[t[e+1]]+wt[t[e+2]]+wt[t[e+3]]+"-"+wt[t[e+4]]+wt[t[e+5]]+"-"+wt[t[e+6]]+wt[t[e+7]]+"-"+wt[t[e+8]]+wt[t[e+9]]+"-"+wt[t[e+10]]+wt[t[e+11]]+wt[t[e+12]]+wt[t[e+13]]+wt[t[e+14]]+wt[t[e+15]]).toLowerCase()}function xt(t){if(!function(t){return"string"==typeof t&&bt.test(t)}(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function Ct(t,e,n){function r(t,r,o,i){var a;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=xt(r)),16!==(null===(a=r)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+t.length);if(c.set(r),c.set(t,r.length),c=n(c),c[6]=15&c[6]|e,c[8]=63&c[8]|128,o){i=i||0;for(let t=0;t<16;++t)o[i+t]=c[t];return o}return It(c)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function At(t){return 14+(t+64>>>9<<4)+1}function kt(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function Et(t,e,n,r,o,i){return kt((a=kt(kt(e,t),kt(r,i)))<<(c=o)|a>>>32-c,n);var a,c}function Ot(t,e,n,r,o,i,a){return Et(e&n|~e&r,t,e,o,i,a)}function Ut(t,e,n,r,o,i,a){return Et(e&r|n&~r,t,e,o,i,a)}function jt(t,e,n,r,o,i,a){return Et(e^n^r,t,e,o,i,a)}function _t(t,e,n,r,o,i,a){return Et(n^(e|~r),t,e,o,i,a)}Ct("v3",48,(function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){const n=t[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);e.push(i)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[At(e)-1]=e;let n=1732584193,r=-271733879,o=-1732584194,i=271733878;for(let e=0;e<t.length;e+=16){const a=n,c=r,u=o,s=i;n=Ot(n,r,o,i,t[e],7,-680876936),i=Ot(i,n,r,o,t[e+1],12,-389564586),o=Ot(o,i,n,r,t[e+2],17,606105819),r=Ot(r,o,i,n,t[e+3],22,-1044525330),n=Ot(n,r,o,i,t[e+4],7,-176418897),i=Ot(i,n,r,o,t[e+5],12,1200080426),o=Ot(o,i,n,r,t[e+6],17,-1473231341),r=Ot(r,o,i,n,t[e+7],22,-45705983),n=Ot(n,r,o,i,t[e+8],7,1770035416),i=Ot(i,n,r,o,t[e+9],12,-1958414417),o=Ot(o,i,n,r,t[e+10],17,-42063),r=Ot(r,o,i,n,t[e+11],22,-1990404162),n=Ot(n,r,o,i,t[e+12],7,1804603682),i=Ot(i,n,r,o,t[e+13],12,-40341101),o=Ot(o,i,n,r,t[e+14],17,-1502002290),r=Ot(r,o,i,n,t[e+15],22,1236535329),n=Ut(n,r,o,i,t[e+1],5,-165796510),i=Ut(i,n,r,o,t[e+6],9,-1069501632),o=Ut(o,i,n,r,t[e+11],14,643717713),r=Ut(r,o,i,n,t[e],20,-373897302),n=Ut(n,r,o,i,t[e+5],5,-701558691),i=Ut(i,n,r,o,t[e+10],9,38016083),o=Ut(o,i,n,r,t[e+15],14,-660478335),r=Ut(r,o,i,n,t[e+4],20,-405537848),n=Ut(n,r,o,i,t[e+9],5,568446438),i=Ut(i,n,r,o,t[e+14],9,-1019803690),o=Ut(o,i,n,r,t[e+3],14,-187363961),r=Ut(r,o,i,n,t[e+8],20,1163531501),n=Ut(n,r,o,i,t[e+13],5,-1444681467),i=Ut(i,n,r,o,t[e+2],9,-51403784),o=Ut(o,i,n,r,t[e+7],14,1735328473),r=Ut(r,o,i,n,t[e+12],20,-1926607734),n=jt(n,r,o,i,t[e+5],4,-378558),i=jt(i,n,r,o,t[e+8],11,-2022574463),o=jt(o,i,n,r,t[e+11],16,1839030562),r=jt(r,o,i,n,t[e+14],23,-35309556),n=jt(n,r,o,i,t[e+1],4,-1530992060),i=jt(i,n,r,o,t[e+4],11,1272893353),o=jt(o,i,n,r,t[e+7],16,-155497632),r=jt(r,o,i,n,t[e+10],23,-1094730640),n=jt(n,r,o,i,t[e+13],4,681279174),i=jt(i,n,r,o,t[e],11,-358537222),o=jt(o,i,n,r,t[e+3],16,-722521979),r=jt(r,o,i,n,t[e+6],23,76029189),n=jt(n,r,o,i,t[e+9],4,-640364487),i=jt(i,n,r,o,t[e+12],11,-421815835),o=jt(o,i,n,r,t[e+15],16,530742520),r=jt(r,o,i,n,t[e+2],23,-995338651),n=_t(n,r,o,i,t[e],6,-198630844),i=_t(i,n,r,o,t[e+7],10,1126891415),o=_t(o,i,n,r,t[e+14],15,-1416354905),r=_t(r,o,i,n,t[e+5],21,-57434055),n=_t(n,r,o,i,t[e+12],6,1700485571),i=_t(i,n,r,o,t[e+3],10,-1894986606),o=_t(o,i,n,r,t[e+10],15,-1051523),r=_t(r,o,i,n,t[e+1],21,-2054922799),n=_t(n,r,o,i,t[e+8],6,1873313359),i=_t(i,n,r,o,t[e+15],10,-30611744),o=_t(o,i,n,r,t[e+6],15,-1560198380),r=_t(r,o,i,n,t[e+13],21,1309151649),n=_t(n,r,o,i,t[e+4],6,-145523070),i=_t(i,n,r,o,t[e+11],10,-1120210379),o=_t(o,i,n,r,t[e+2],15,718787259),r=_t(r,o,i,n,t[e+9],21,-343485551),n=kt(n,a),r=kt(r,c),o=kt(o,u),i=kt(i,s)}return[n,r,o,i]}(function(t){if(0===t.length)return[];const e=8*t.length,n=new Uint32Array(At(e));for(let r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}));var Mt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function St(t,e,n){if(Mt.randomUUID&&!e&&!t)return Mt.randomUUID();const r=(t=t||{}).random||(t.rng||$t)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return It(r)}function Lt(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function Nt(t,e){return t<<e|t>>>32-e}Ct("v5",80,(function(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const r=t.length/4+2,o=Math.ceil(r/16),i=new Array(o);for(let e=0;e<o;++e){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=t[64*e+4*r]<<24|t[64*e+4*r+1]<<16|t[64*e+4*r+2]<<8|t[64*e+4*r+3];i[e]=n}i[o-1][14]=8*(t.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<o;++t){const r=new Uint32Array(80);for(let e=0;e<16;++e)r[e]=i[t][e];for(let t=16;t<80;++t)r[t]=Nt(r[t-3]^r[t-8]^r[t-14]^r[t-16],1);let o=n[0],a=n[1],c=n[2],u=n[3],s=n[4];for(let t=0;t<80;++t){const n=Math.floor(t/20),i=Nt(o,5)+Lt(n,a,c,u)+s+e[n]+r[t]>>>0;s=u,u=c,c=Nt(a,30)>>>0,a=o,o=i}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+u>>>0,n[4]=n[4]+s>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));var Pt={exports:{}};!function(t,e){function n(t){return"object"!=typeof t||"toString"in t?t:Object.prototype.toString.call(t).slice(8,-1)}Object.defineProperty(e,"__esModule",{value:!0});var r="object"==typeof process&&!0;function o(t,e){if(!t){if(r)throw new Error("Invariant failed");throw new Error(e())}}e.invariant=o;var i=Object.prototype.hasOwnProperty,a=Array.prototype.splice,c=Object.prototype.toString;function u(t){return c.call(t).slice(8,-1)}var s=Object.assign||function(t,e){return l(e).forEach((function(n){i.call(e,n)&&(t[n]=e[n])})),t},l="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function f(t){return Array.isArray(t)?s(t.constructor(t.length),t):"Map"===u(t)?new Map(t):"Set"===u(t)?new Set(t):t&&"object"==typeof t?s(Object.create(Object.getPrototypeOf(t)),t):t}var d=function(){function t(){this.commands=s({},p),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,e){return t===e},this.update.newContext=function(){return(new t).update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),t.prototype.extend=function(t,e){this.commands[t]=e},t.prototype.update=function(t,e){var n=this,r="function"==typeof e?{$apply:e}:e;Array.isArray(t)&&Array.isArray(r)||o(!Array.isArray(r),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),o("object"==typeof r&&null!==r,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."}));var a=t;return l(r).forEach((function(e){if(i.call(n.commands,e)){var o=t===a;a=n.commands[e](r[e],a,r,t),o&&n.isEquals(a,t)&&(a=t)}else{var c="Map"===u(t)?n.update(t.get(e),r[e]):n.update(t[e],r[e]),s="Map"===u(a)?a.get(e):a[e];n.isEquals(c,s)&&(void 0!==c||i.call(t,e))||(a===t&&(a=f(t)),"Map"===u(a)?a.set(e,c):a[e]=c)}})),a},t}();e.Context=d;var p={$push:function(t,e,n){return h(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return h(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,i){return function(t,e){o(Array.isArray(t),(function(){return"Expected $splice target to be an array; got "+n(t)})),y(e.$splice)}(e,r),t.forEach((function(t){y(t),e===i&&t.length&&(e=f(i)),a.apply(e,t)})),e},$set:function(t,e,n){return function(t){o(1===Object.keys(t).length,(function(){return"Cannot have more than one key in an object with $set"}))}(n),t},$toggle:function(t,e){g(t,"$toggle");var n=t.length?f(e):e;return t.forEach((function(t){n[t]=!e[t]})),n},$unset:function(t,e,n,r){return g(t,"$unset"),t.forEach((function(t){Object.hasOwnProperty.call(e,t)&&(e===r&&(e=f(r)),delete e[t])})),e},$add:function(t,e,n,r){return v(e,"$add"),g(t,"$add"),"Map"===u(e)?t.forEach((function(t){var n=t[0],o=t[1];e===r&&e.get(n)!==o&&(e=f(r)),e.set(n,o)})):t.forEach((function(t){e!==r||e.has(t)||(e=f(r)),e.add(t)})),e},$remove:function(t,e,n,r){return v(e,"$remove"),g(t,"$remove"),t.forEach((function(t){e===r&&e.has(t)&&(e=f(r)),e.delete(t)})),e},$merge:function(t,e,r,i){var a,c;return a=e,o((c=t)&&"object"==typeof c,(function(){return"update(): $merge expects a spec of type 'object'; got "+n(c)})),o(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+n(a)})),l(t).forEach((function(n){t[n]!==e[n]&&(e===i&&(e=f(i)),e[n]=t[n])})),e},$apply:function(t,e){var r;return o("function"==typeof(r=t),(function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."})),t(e)}},m=new d;function h(t,e,r){o(Array.isArray(t),(function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(t)+"."})),g(e[r],r)}function g(t,e){o(Array.isArray(t),(function(){return"update(): expected spec of "+n(e)+" to be an array; got "+n(t)+". Did you forget to wrap your parameter in an array?"}))}function y(t){o(Array.isArray(t),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(t)+". Did you forget to wrap your parameters in an array?"}))}function v(t,e){var r=u(t);o("Map"===r||"Set"===r,(function(){return"update(): "+n(e)+" expects a target of type Set or Map; got "+n(r)}))}e.isEquals=m.update.isEquals,e.extend=m.extend,e.default=m.update,e.default.default=t.exports=s(e.default,e)}(Pt,Pt.exports);var Tt,Dt,Rt,Bt=Y(Pt.exports);function qt(t){let e,n,r,o,i,a,c;const u=t[5].default,p=function(t,e,n,r){if(t){const o=s(t,e,n,r);return t[0](o)}}(u,t,t[4],null);return{c(){e=m("div"),n=m("label"),p&&p.c(),r=g(),o=m("input"),v(n,"class","button svelte-hcszan"),v(n,"for","upload"),v(o,"id","upload"),v(o,"type","file"),v(o,"accept",t[0]),v(o,"class","svelte-hcszan"),v(e,"class","button-wrap svelte-hcszan")},m(u,s){f(u,e,s),l(e,n),p&&p.m(n,null),l(e,r),l(e,o),i=!0,a||(c=y(o,"change",t[1]),a=!0)},p(t,[e]){p&&p.p&&(!i||16&e)&&function(t,e,n,r,o,i){if(o){const a=s(e,n,r,i);t.p(a,o)}}(p,u,t,t[4],i?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(u,t[4],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[4]),null),(!i||1&e)&&v(o,"accept",t[0])},i(t){i||(T(p,t),i=!0)},o(t){D(p,t),i=!1},d(t){t&&d(e),p&&p.d(t),a=!1,c()}}}function Vt(t,e,n){let{$$slots:r={},$$scope:o}=e,{accept:i}=e,{startLoading:a}=e,{cb:c}=e;return t.$$set=t=>{"accept"in t&&n(0,i=t.accept),"startLoading"in t&&n(2,a=t.startLoading),"cb"in t&&n(3,c=t.cb),"$$scope"in t&&n(4,o=t.$$scope)},[i,function(t){a();const e=t.currentTarget.files;if(e){const t=e[0],n=new FileReader;n.onload=function(t){const e=t.target;if(e){const t=e.result;t&&c(t)}},n.readAsText(t)}},a,c,o,r]}!function(t){t[t.V0=0]="V0"}(Tt||(Tt={})),function(t){t.create=function(t){return{Version:Tt.V0,ItemId:t,Name:"",Loot:[],Description:"",ImageUrl:dt.mkNone()}}}(Dt||(Dt={})),function(t){function e(t,e){return Bt(t,{$add:[[e.ItemId,e]]})}t.create=function(t){const n=St(),r=e(t,Dt.create(n));return lt.mk(n,r)},t.load=function(t){return JSON.parse(t,ot.reviver)},t.save=function(t){return JSON.stringify(t,ot.replacer)},t.get=function(t,e){return t.get(e)},t.set=e,t.remove=function(t,e){return Bt(t,{$remove:[e]})},function(e){const n="localSaveKey";e.save=function(e){window.localStorage.setItem(n,t.save(e))},e.load=function(){const e=window.localStorage.getItem(n);if(e)return t.load(e)}}(t.LocalStorage||(t.LocalStorage={}))}(Rt||(Rt={}));var Wt=class extends z{constructor(t){super(),W(this,t,Vt,qt,i,{accept:0,startLoading:2,cb:3})}};function zt(t){let e,n,r;return{c(){e=m("input"),v(e,"id","id"),v(e,"type","text"),e.value=t[4]},m(o,i){f(o,e,i),n||(r=y(e,"input",t[6]),n=!0)},p(t,n){16&n&&e.value!==t[4]&&(e.value=t[4])},d(t){t&&d(e),n=!1,r()}}}function Jt(t){let e,n,r;return{c(){e=m("textarea"),v(e,"id","id"),v(e,"name","text"),v(e,"cols",30),v(e,"rows",10),e.value=t[4]},m(o,i){f(o,e,i),n||(r=y(e,"input",t[5]),n=!0)},p(t,n){16&n&&(e.value=t[4])},d(t){t&&d(e),n=!1,r()}}}function Yt(e){let n,r,o,i,a,c,u,s,p,b;function w(t,e){return t[3]?Jt:zt}let I=w(e),x=I(e);return{c(){n=m("div"),r=m("label"),o=h(e[0]),i=g(),x.c(),a=g(),c=m("button"),u=h("Submit"),v(r,"for","id"),c.disabled=s=e[1]===e[4]},m(t,s){f(t,n,s),l(n,r),l(r,o),l(n,i),x.m(n,null),l(n,a),l(n,c),l(c,u),p||(b=y(c,"click",e[7]),p=!0)},p(t,[e]){1&e&&$(o,t[0]),I===(I=w(t))&&x?x.p(t,e):(x.d(1),x=I(t),x&&(x.c(),x.m(n,a))),18&e&&s!==(s=t[1]===t[4])&&(c.disabled=s)},i:t,o:t,d(t){t&&d(n),x.d(),p=!1,b()}}}function Ft(t,e,n){let{label:r}=e,{value:o}=e,{submit:i}=e,{isMultiline:a=!1}=e,c=o;return t.$$set=t=>{"label"in t&&n(0,r=t.label),"value"in t&&n(1,o=t.value),"submit"in t&&n(2,i=t.submit),"isMultiline"in t&&n(3,a=t.isMultiline)},[r,o,i,a,c,t=>{n(4,c=t.currentTarget.value)},t=>{n(4,c=t.currentTarget.value)},t=>{o!==c&&i(c)}]}var Kt=class extends z{constructor(t){super(),W(this,t,Ft,Yt,i,{label:0,value:1,submit:2,isMultiline:3})}};function Gt(t,e,n){const r=t.slice();return r[6]=e[n],r[8]=n,r}function Ht(t){let e,n,r,o,i,a,c,u=t[6].Name+"";function s(...e){return t[3](t[8],...e)}return{c(){e=m("li"),n=m("button"),r=h(u),i=g(),v(n,"style",o=dt.isSome(t[2])&&t[2]===t[8]?"color: red;":"")},m(t,o){f(t,e,o),l(e,n),l(n,r),l(e,i),a||(c=y(n,"click",s),a=!0)},p(e,i){t=e,1&i&&u!==(u=t[6].Name+"")&&$(r,u),4&i&&o!==(o=dt.isSome(t[2])&&t[2]===t[8]?"color: red;":"")&&v(n,"style",o)},d(t){t&&d(e),a=!1,c()}}}function Qt(e){let n,o,i,a,c,u,s,v,$,b,w=e[0],I=[];for(let t=0;t<w.length;t+=1)I[t]=Ht(Gt(e,w,t));return{c(){n=m("div"),o=m("ul");for(let t=0;t<I.length;t+=1)I[t].c();i=g(),a=m("button"),c=h("Выбрать"),s=g(),v=m("button"),v.textContent="Отменить",a.disabled=u=!dt.isSome(e[2])},m(t,r){f(t,n,r),l(n,o);for(let t=0;t<I.length;t+=1)I[t].m(o,null);l(n,i),l(n,a),l(a,c),l(n,s),l(n,v),$||(b=[y(a,"click",e[4]),y(v,"click",e[5])],$=!0)},p(t,[e]){if(5&e){let n;for(w=t[0],n=0;n<w.length;n+=1){const r=Gt(t,w,n);I[n]?I[n].p(r,e):(I[n]=Ht(r),I[n].c(),I[n].m(o,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=w.length}4&e&&u!==(u=!dt.isSome(t[2]))&&(a.disabled=u)},i:t,o:t,d(t){t&&d(n),p(I,t),$=!1,r(b)}}}function Xt(t,e,n){let r,{items:o}=e,{submit:i}=e;return t.$$set=t=>{"items"in t&&n(0,o=t.items),"submit"in t&&n(1,i=t.submit)},[o,i,r,(t,e)=>{dt.reduce(r,(e=>{n(2,r=e===t?dt.mkNone():dt.mkSome(t))}),(()=>{n(2,r=dt.mkSome(t))}))},t=>{dt.reduce(r,(t=>{i(dt.mkSome(o[t]))}),(()=>{}))},t=>{i(dt.mkNone())}]}class Zt extends z{constructor(t){super(),W(this,t,Xt,Qt,i,{items:0,submit:1})}}function te(t,e,n){const r=t.slice();return r[11]=e[n],r[13]=n,r}function ee(t){let e,n,r,o,i=t[11][1]+"";return{c(){e=m("div"),n=h("Unknown item with "),r=h(i),o=h(" ID")},m(t,i){f(t,e,i),l(e,n),l(e,r),l(e,o)},p(t,e){2&e&&i!==(i=t[11][1]+"")&&$(r,i)},d(t){t&&d(e)}}}function ne(t){let e,n,r=t[11][1].Name+"";return{c(){e=m("div"),n=h(r)},m(t,r){f(t,e,r),l(e,n)},p(t,e){2&e&&r!==(r=t[11][1].Name+"")&&$(n,r)},d(t){t&&d(e)}}}function re(t){let e,n,r,o,i,a;function c(t,e){return"Ok"===t[11][0]?ne:ee}let u=c(t),s=u(t);function p(...e){return t[7](t[13],...e)}return{c(){e=m("il"),s.c(),n=g(),r=m("button"),r.textContent="Удалить",o=g()},m(t,c){f(t,e,c),s.m(e,null),l(e,n),l(e,r),l(e,o),i||(a=y(r,"click",p),i=!0)},p(r,o){u===(u=c(t=r))&&s?s.p(t,o):(s.d(1),s=u(t),s&&(s.c(),s.m(e,n)))},d(t){t&&d(e),s.d(),i=!1,a()}}}function oe(t){let e,n;return e=new Zt({props:{items:t[4]().filter(t[9]),submit:t[10]}}),{c(){R(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};17&n&&(r.items=t[4]().filter(t[9])),42&n&&(r.submit=t[10]),e.$set(r)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ie(t){let e,n,r,o,i,a,c,u,s,h,v,$=t[1],b=[];for(let e=0;e<$.length;e+=1)b[e]=re(te(t,$,e));let w=t[5]&&oe(t);return{c(){e=m("div"),n=m("div"),n.textContent="Можно поймать:",r=g(),o=m("div"),i=m("ul");for(let t=0;t<b.length;t+=1)b[t].c();a=g(),c=m("button"),c.textContent="Добавить",u=g(),w&&w.c()},m(d,p){f(d,e,p),l(e,n),l(e,r),l(e,o),l(o,i);for(let t=0;t<b.length;t+=1)b[t].m(i,null);l(e,a),l(e,c),l(e,u),w&&w.m(e,null),s=!0,h||(v=y(c,"click",t[8]),h=!0)},p(t,[n]){if(6&n){let e;for($=t[1],e=0;e<$.length;e+=1){const r=te(t,$,e);b[e]?b[e].p(r,n):(b[e]=re(r),b[e].c(),b[e].m(i,null))}for(;e<b.length;e+=1)b[e].d(1);b.length=$.length}t[5]?w?(w.p(t,n),32&n&&T(w,1)):(w=oe(t),w.c(),T(w,1),w.m(e,null)):w&&(N(),D(w,1,1,(()=>{w=null})),P())},i(t){s||(T(w),s=!0)},o(t){D(w),s=!1},d(t){t&&d(e),p(b,t),w&&w.d(),h=!1,v()}}}function ae(t,e,n){let{id:r}=e,{loot:o}=e,{removeByIndex:i}=e,{insertAfter:a}=e,{getAllItems:c}=e,u=!1;function s(t){const e=o.find((e=>ut.reduce(e,(e=>t===e),(e=>t.ItemId===e))));return dt.isSome(e)}return t.$$set=t=>{"id"in t&&n(0,r=t.id),"loot"in t&&n(1,o=t.loot),"removeByIndex"in t&&n(2,i=t.removeByIndex),"insertAfter"in t&&n(3,a=t.insertAfter),"getAllItems"in t&&n(4,c=t.getAllItems)},[r,o,i,a,c,u,s,(t,e)=>{i(t)},t=>{n(5,u=!0)},t=>t.ItemId!==r&&!s(t),t=>{dt.reduce(t,(t=>{a(o.length-1,t.ItemId)}),(()=>{})),n(5,u=!1)}]}class ce extends z{constructor(t){super(),W(this,t,ae,ie,i,{id:0,loot:1,removeByIndex:2,insertAfter:3,getAllItems:4})}}function ue(t){let e,n;return{c(){e=m("img"),u(e.src,n=t[0].ImageUrl)||v(e,"src",n),v(e,"alt","изображение для предмета")},m(t,n){f(t,e,n)},p(t,r){1&r&&!u(e.src,n=t[0].ImageUrl)&&v(e,"src",n)},d(t){t&&d(e)}}}function se(t){let e,n,r,o,i,a,c,u,s,p,y,v,b,w,I=t[0].ItemId+"",x=dt.isSome(t[0].ImageUrl);a=new Kt({props:{label:"Название:",value:t[0].Name,submit:t[6]}}),u=new ce({props:{id:t[0].ItemId,loot:t[0].Loot.map(t[7]),removeByIndex:t[8],insertAfter:t[9],getAllItems:t[2]}}),p=new Kt({props:{label:"Описание:",isMultiline:!0,value:t[0].Description,submit:t[10]}}),v=new Kt({props:{label:"Ссылка на изображение:",value:dt.reduce(t[0].ImageUrl,le,fe),submit:t[11]}});let C=x&&ue(t);return{c(){e=m("div"),n=m("div"),r=h("Id: "),o=h(I),i=g(),R(a.$$.fragment),c=g(),R(u.$$.fragment),s=g(),R(p.$$.fragment),y=g(),R(v.$$.fragment),b=g(),C&&C.c()},m(t,d){f(t,e,d),l(e,n),l(n,r),l(n,o),l(e,i),B(a,e,null),l(e,c),B(u,e,null),l(e,s),B(p,e,null),l(e,y),B(v,e,null),l(e,b),C&&C.m(e,null),w=!0},p(t,[n]){(!w||1&n)&&I!==(I=t[0].ItemId+"")&&$(o,I);const r={};1&n&&(r.value=t[0].Name),a.$set(r);const i={};1&n&&(i.id=t[0].ItemId),1&n&&(i.loot=t[0].Loot.map(t[7])),1&n&&(i.removeByIndex=t[8]),1&n&&(i.insertAfter=t[9]),u.$set(i);const c={};1&n&&(c.value=t[0].Description),p.$set(c);const s={};1&n&&(s.value=dt.reduce(t[0].ImageUrl,le,fe)),v.$set(s),1&n&&(x=dt.isSome(t[0].ImageUrl)),x?C?C.p(t,n):(C=ue(t),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i(t){w||(T(a.$$.fragment,t),T(u.$$.fragment,t),T(p.$$.fragment,t),T(v.$$.fragment,t),w=!0)},o(t){D(a.$$.fragment,t),D(u.$$.fragment,t),D(p.$$.fragment,t),D(v.$$.fragment,t),w=!1},d(t){t&&d(e),q(a),q(u),q(p),q(v),C&&C.d()}}}const le=t=>t,fe=()=>"";function de(t,e,n){let{item:r}=e,{itemsContainer:o}=e,{updateItemsContainer:i}=e;function a(t){return dt.reduce(Rt.get(o,t),(t=>ut.mkOk(t)),(()=>ut.mkError(t)))}function c(t){!function(t){i(Rt.set(o,t))}(Bt(r,t))}return t.$$set=t=>{"item"in t&&n(0,r=t.item),"itemsContainer"in t&&n(4,o=t.itemsContainer),"updateItemsContainer"in t&&n(5,i=t.updateItemsContainer)},[r,a,function(){return ot.toArray(o,((t,e)=>e))},c,o,i,t=>{c({Name:{$set:t}})},t=>a(t),t=>{c({Loot:{$set:ht.remove(r.Loot,t)}})},(t,e)=>{c({Loot:{$set:ht.insertAfter(r.Loot,e,t)}})},t=>{c({Description:{$set:t}})},t=>{c({ImageUrl:{$set:""!==t?dt.mkSome(t):dt.mkNone()}})}]}class pe extends z{constructor(t){super(),W(this,t,de,se,i,{item:0,itemsContainer:4,updateItemsContainer:5})}}function me(e){let n,r,o=e[0][1]+"";return{c(){n=h("Not found "),r=h(o)},m(t,e){f(t,n,e),f(t,r,e)},p(t,e){1&e&&o!==(o=t[0][1]+"")&&$(r,o)},i:t,o:t,d(t){t&&d(n),t&&d(r)}}}function he(t){let e,n;return e=new pe({props:{item:t[0][1],itemsContainer:t[1],updateItemsContainer:t[2]}}),{c(){R(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.item=t[0][1]),2&n&&(r.itemsContainer=t[1]),4&n&&(r.updateItemsContainer=t[2]),e.$set(r)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ge(t){let e,n,r,o;const i=[he,me],a=[];function c(t,e){return"Ok"===t[0][0]?0:1}return n=c(t),r=a[n]=i[n](t),{c(){e=m("div"),r.c()},m(t,r){f(t,e,r),a[n].m(e,null),o=!0},p(t,[o]){let u=n;n=c(t),n===u?a[n].p(t,o):(N(),D(a[u],1,1,(()=>{a[u]=null})),P(),r=a[n],r?r.p(t,o):(r=a[n]=i[n](t),r.c()),T(r,1),r.m(e,null))},i(t){o||(T(r),o=!0)},o(t){D(r),o=!1},d(t){t&&d(e),a[n].d()}}}function ye(t,e,n){let{item:r}=e,{itemsContainer:o}=e,{updateItemsContainer:i}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item),"itemsContainer"in t&&n(1,o=t.itemsContainer),"updateItemsContainer"in t&&n(2,i=t.updateItemsContainer)},[r,o,i]}class ve extends z{constructor(t){super(),W(this,t,ye,ge,i,{item:0,itemsContainer:1,updateItemsContainer:2})}}function $e(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function be(e){let n;return{c(){n=m("span"),n.textContent="ничего"},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function we(t){let e,n=t[3](t[7].Loot)+"";return{c(){e=h(n)},m(t,n){f(t,e,n)},p(t,r){2&r&&n!==(n=t[3](t[7].Loot)+"")&&$(e,n)},d(t){t&&d(e)}}}function Ie(t){let e,n,r,o,i;return{c(){e=m("div"),n=m("span"),n.textContent="Картинка:",r=g(),o=m("img"),u(o.src,i=t[7].ImageUrl)||v(o,"src",i),v(o,"alt",""),v(o,"width","40")},m(t,i){f(t,e,i),l(e,n),l(e,r),l(e,o)},p(t,e){2&e&&!u(o.src,i=t[7].ImageUrl)&&v(o,"src",i)},d(t){t&&d(e)}}}function xe(t){let e,n,o,i,a,c,u,s,p,v,b,w,I,x,C,A,k,E,O,U=t[7].Name+"",j=t[7].Description+"";function _(t,e){return t[7].Loot.length>0?we:be}let M=_(t),S=M(t),L=t[7].ImageUrl&&Ie(t);function N(...e){return t[4](t[7],...e)}function P(...e){return t[5](t[7],...e)}return{c(){e=m("div"),n=m("h4"),o=h(U),i=g(),a=m("div"),c=m("span"),c.textContent="Можно поймать:",u=g(),S.c(),s=g(),p=m("div"),v=h("Описание: "),b=h(j),w=g(),L&&L.c(),I=g(),x=m("button"),x.textContent="Редактировать",C=g(),A=m("button"),A.textContent="Удалить",k=g()},m(t,r){f(t,e,r),l(e,n),l(n,o),l(e,i),l(e,a),l(a,c),l(a,u),S.m(a,null),l(e,s),l(e,p),l(p,v),l(p,b),l(e,w),L&&L.m(e,null),l(e,I),l(e,x),l(e,C),l(e,A),l(e,k),E||(O=[y(x,"click",N),y(A,"click",P)],E=!0)},p(n,r){t=n,2&r&&U!==(U=t[7].Name+"")&&$(o,U),M===(M=_(t))&&S?S.p(t,r):(S.d(1),S=M(t),S&&(S.c(),S.m(a,null))),2&r&&j!==(j=t[7].Description+"")&&$(b,j),t[7].ImageUrl?L?L.p(t,r):(L=Ie(t),L.c(),L.m(e,I)):L&&(L.d(1),L=null)},d(t){t&&d(e),S.d(),L&&L.d(),E=!1,r(O)}}}function Ce(e){let n,r,o,i,a,c,u=ot.toArray(e[1],Ae),s=[];for(let t=0;t<u.length;t+=1)s[t]=xe($e(e,u,t));return{c(){n=m("div"),r=m("div");for(let t=0;t<s.length;t+=1)s[t].c();o=g(),i=m("button"),i.textContent="Добавить",b(r,"overflow-y","auto"),b(n,"height","100%"),b(n,"display","flex"),b(n,"flex-direction","column")},m(t,u){f(t,n,u),l(n,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);l(n,o),l(n,i),a||(c=y(i,"click",e[6]),a=!0)},p(t,[e]){if(15&e){let n;for(u=ot.toArray(t[1],Ae),n=0;n<u.length;n+=1){const o=$e(t,u,n);s[n]?s[n].p(o,e):(s[n]=xe(o),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=u.length}},i:t,o:t,d(t){t&&d(n),p(s,t),a=!1,c()}}}const Ae=(t,e)=>e;function ke(t,e,n){let{editItem:r}=e,{itemsContainer:o}=e,{updateItemsContainer:i}=e;return t.$$set=t=>{"editItem"in t&&n(0,r=t.editItem),"itemsContainer"in t&&n(1,o=t.itemsContainer),"updateItemsContainer"in t&&n(2,i=t.updateItemsContainer)},[r,o,i,function(t){return t.map((t=>dt.reduce(Rt.get(o,t),(t=>t.Name),(()=>`unknown item with ${t} ID`)))).filter(dt.isSome).join(", ")},(t,e)=>{r(t.ItemId)},(t,e)=>{i(Rt.remove(o,t.ItemId))},t=>{const[e,n]=Rt.create(o);i(n),r(e)}]}class Ee extends z{constructor(t){super(),W(this,t,ke,Ce,i,{editItem:0,itemsContainer:1,updateItemsContainer:2})}}function Oe(t){let e;return{c(){e=h("Загрузить")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function Ue(t){let e,n,r;return n=new Ee({props:{editItem:t[9],itemsContainer:t[1],updateItemsContainer:t[2]}}),{c(){e=m("div"),R(n.$$.fragment),b(e,"flex-grow","1"),b(e,"overflow-y","auto")},m(t,o){f(t,e,o),B(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.editItem=t[9]),2&e&&(r.itemsContainer=t[1]),n.$set(r)},i(t){r||(T(n.$$.fragment,t),r=!0)},o(t){D(n.$$.fragment,t),r=!1},d(t){t&&d(e),q(n)}}}function je(t){let e,n,r,o,i,a,c;return o=new ve({props:{item:t[3](t[0].fields),itemsContainer:t[1],updateItemsContainer:t[8]}}),{c(){e=m("div"),n=m("button"),n.textContent="Вернуться к списку предметов",r=g(),R(o.$$.fragment)},m(u,s){f(u,e,s),l(e,n),l(e,r),B(o,e,null),i=!0,a||(c=y(n,"click",t[7]),a=!0)},p(t,e){const n={};1&e&&(n.item=t[3](t[0].fields)),2&e&&(n.itemsContainer=t[1]),1&e&&(n.updateItemsContainer=t[8]),o.$set(n)},i(t){i||(T(o.$$.fragment,t),i=!0)},o(t){D(o.$$.fragment,t),i=!1},d(t){t&&d(e),q(o),a=!1,c()}}}function _e(t){let e,n,r,o,i,a,c,u,s,p,h;r=new Wt({props:{accept:"application/json",startLoading:Me,cb:t[5],$$slots:{default:[Oe]},$$scope:{ctx:t}}});const $=[je,Ue],w=[];function I(t,e){return"Item"===t[0].case?0:"ItemList"===t[0].case?1:-1}return~(c=I(t))&&(u=w[c]=$[c](t)),{c(){e=m("main"),n=m("nav"),R(r.$$.fragment),o=g(),i=m("button"),i.textContent="Сохранить",a=g(),u&&u.c(),b(n,"display","flex"),v(e,"class","svelte-yt8nlh")},m(u,d){f(u,e,d),l(e,n),B(r,n,null),l(n,o),l(n,i),l(e,a),~c&&w[c].m(e,null),s=!0,p||(h=y(i,"click",t[6]),p=!0)},p(t,[n]){const o={};2048&n&&(o.$$scope={dirty:n,ctx:t}),r.$set(o);let i=c;c=I(t),c===i?~c&&w[c].p(t,n):(u&&(N(),D(w[i],1,1,(()=>{w[i]=null})),P()),~c?(u=w[c],u?u.p(t,n):(u=w[c]=$[c](t),u.c()),T(u,1),u.m(e,null)):u=null)},i(t){s||(T(r.$$.fragment,t),T(u),s=!0)},o(t){D(r.$$.fragment,t),D(u),s=!1},d(t){t&&d(e),q(r),~c&&w[c].d(),p=!1,h()}}}const Me=()=>{};function Se(t,e,n){let r=at.mkEmptyUnionCase("ItemList"),o=new Map;function i(t){n(1,o=t),Rt.LocalStorage.save(o)}function a(t){n(1,o=t),n(0,r=at.mkEmptyUnionCase("ItemList")),Rt.LocalStorage.save(o)}const c=Rt.LocalStorage.load();c&&a(c);return[r,o,i,function(t){return dt.reduce(Rt.get(o,t),(t=>ut.mkOk(t)),(()=>ut.mkError(t)))},a,t=>a(Rt.load(t)),t=>{!function(t,e,n){const r=new Blob([t],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,e);else{const t=document.createElement("a"),n=URL.createObjectURL(r);t.href=n,t.download=e,document.body.appendChild(t),t.click(),setTimeout((function(){document.body.removeChild(t),window.URL.revokeObjectURL(n)}),0)}}(Rt.save(o),"items.json","application/json")},t=>{n(0,r=at.mkEmptyUnionCase("ItemList"))},t=>{i(t),"Item"===r.case&&n(0,r=at.mkUnionCase("Item",r.fields))},t=>{n(0,r=at.mkUnionCase("Item",t))}]}class Le extends z{constructor(t){super(),W(this,t,Se,_e,i,{})}}function Ne(e){let n,r;return n=new Le({}),{c(){R(n.$$.fragment)},m(t,e){B(n,t,e),r=!0},p:t,i(t){r||(T(n.$$.fragment,t),r=!0)},o(t){D(n.$$.fragment,t),r=!1},d(t){q(n,t)}}}const Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(t){navigator.serviceWorker.register(t).then((t=>{t.onupdatefound=()=>{const e=t.installing;e.onstatechange=()=>{"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available please refresh."):console.log("Content is cached for offline use."))}}})).catch((t=>{console.error("Error during service worker registration:",t)}))}const De=new class extends z{constructor(t){super(),W(this,t,null,Ne,i,{})}}({target:document.body,props:{}});return function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="./sw.js";Pe?function(t){fetch(t).then((e=>{const n=e.headers.get("content-type");404===e.status||n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((t=>{t.unregister().then((()=>{window.location.reload()}))})):Te(t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t):Te(t)}))}}(),De}();
